---
title: Getting Started
---

import Callout from 'nextra-theme-docs/callout';

import DocBasic from '../../components/doc-basic';
import DocCover from '../../components/doc-cover';
import DocToolbar from '../../components/doc-toolbar';
import DocButton from '../../components/doc-button';
import DocLoop from '../../components/doc-loop';
import DocBackdrop from '../../components/doc-backdrop';
import DocPure from '../../components/doc-pure';
import DocClose from '../../components/doc-close';
import DocBroken from '../../components/doc-broken';
import DocControlled from '../../components/doc-controlled';
import DocPart from '../../components/doc-part';
import DocOverlay from '../../components/doc-overlay';
import DocRender from '../../components/doc-render';

## å®‰è£…

åœ¨ `React` é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

pnpm:

```plaintext
pnpm i react-photo-view
```

yarn:

```plaintext
yarn add react-photo-view
```

æˆ–è€…ç”¨ npm:

```plaintext
npm install react-photo-view
```

## å¿«é€Ÿå¼€å§‹

åœ¨åº”ç”¨å…¥å£å¤„å¼•å…¥ `CSS` æ–‡ä»¶

```js
import 'react-photo-view/dist/react-photo-view.css';
```

åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹å¼•å…¥ `PhotoProvider` å’Œ `PhotoView` ç»„ä»¶ï¼ŒåŸºæœ¬ç”¨æ³•ï¼š

```jsx
import { PhotoProvider, PhotoView } from 'react-photo-view';

export default function MyComponent() {
  return (
    <PhotoProvider>
      <div className="foo">
        {images.map((item, index) => (
          <PhotoView key={index} src={item}>
            <img src={item} alt="" />
          </PhotoView>
        ))}
      </div>
    </PhotoProvider>
  );
}
```

ä»¥ `PhotoProvider`ä¸ºç•Œé™ï¼Œé‡Œé¢æ‰€æœ‰çš„ `PhotoView` å›¾ç‰‡ä¼šæŒ‰ç…§è¿è¡Œé¡ºåºæå–ä¸ºä¸€ç»„å›¾ç‰‡é¢„è§ˆç”»å»Šã€‚å½“æŸä¸ª `<img />` è¢«ç‚¹å‡»ï¼Œåˆ™ä¼šå®šä½åˆ°æŒ‡å®šçš„å›¾ç‰‡å¹¶æ‰“å¼€é¢„è§ˆï¼š

<DocBasic />

å¦‚æœéœ€è¦æ•´ä¸ªé¡µé¢çš„å›¾ç‰‡å½¢æˆä¸€ç»„è¿›è¡Œé¢„è§ˆï¼Œåˆ™å¯ä»¥åœ¨é¡µé¢çš„å…¥å£å¤„åµŒå¥— `PhotoProvider`ã€‚

## object-fit è£åˆ‡

`<PhotoView />` ç»„ä»¶ä¼šè‡ªåŠ¨è¯†åˆ«å­èŠ‚ç‚¹ç±»å‹ï¼Œå¦‚æœå­èŠ‚ç‚¹ä¸º `<img />`ï¼Œå¹¶ä¸”ä½¿ç”¨ `CSS` è®¾ç½®äº† `object-fit` å±æ€§ï¼Œåˆ™åœ¨ç¼©æ”¾åŠ¨ç”»ä¸­é™„å¸¦è£åˆ‡æ•ˆæœï¼š

```jsx
<PhotoView src={imageURL}>
  <img src={imageURL} className="block w-64 h-64 object-cover" alt="" />
</PhotoView>
```

<DocCover />

## è‡ªå®šä¹‰å·¥å…·æ 

åœ¨ `<PhotoProvider />` ä¸Šæ·»åŠ å‚æ•° `toolbarRender` å‡½æ•°ï¼Œè¯¥å‡½æ•°é¡»è¿”å›ä¸€ä¸ª `ReactNode` èŠ‚ç‚¹ã€‚

ä»¥ä¸‹ä»£ç å¯ä»¥æ·»åŠ ä¸€ä¸ªå¢åŠ æ”¾å¤§æŒ‰é’®ï¼š

```jsx
<PhotoProvider
  toolbarRender={({ onScale, scale }) => {
    return <div className="toolbarIcon" onClick={() => onScale(scale + 1)} />;
  }}
>
  {images.map((item, index) => (
    <PhotoView key={index} src={item}>
      <img src={item} alt="" />
    </PhotoView>
  ))}
</PhotoProvider>
```

`toolbarRender` å‡½æ•°æä¾›çš„å‚æ•°æœ‰ï¼š

- `images` - å›¾ç‰‡åˆ—è¡¨ `DataType[]`
- `index` - å½“å‰ç´¢å¼• `number`
- `onIndexChange` - ç´¢å¼•æ”¹å˜å›è°ƒ `(index: number) => void`
- `visible` - æ˜¯å¦å¯è§ `boolean`
- `onClose` - å…³é—­äº‹ä»¶å›è°ƒ `() => void`
- `overlayVisible` - è¦†ç›–ç‰©æ˜¯å¦å¯è§ `boolean`
- `rotate` - å½“å‰æ—‹è½¬è§’åº¦ `number`
- `onRotate` - æ—‹è½¬äº‹ä»¶å›è°ƒ `(rotate: number) => void`
- `scale` - å½“å‰ç¼©æ”¾ `number`
- `onScale` - ç¼©æ”¾äº‹ä»¶å›è°ƒ `(scale: number) => void`

ä»¥ä¸‹ç¤ºä¾‹å®ç°äº†**æ—‹è½¬/å…¨å±/æ”¾å¤§/ç¼©å°**å·¥å…·æ ï¼š

<DocToolbar />

## è§¦å‘èŠ‚ç‚¹

`<PhotoView>` å­ç»„ä»¶å¯ä»¥æ˜¯å¸¸è§„ `React.HTMLAttributes` ç±»å‹ï¼Œå¦‚ `<img />`ã€`<div />` ç­‰ã€‚

å¦‚æœæ˜¯è‡ªå®šä¹‰ç»„ä»¶åˆ™éœ€è¦ä¿è¯ `onClick` ï¼ˆæ¡Œé¢ç«¯ï¼‰ï¼Œ`onTouchStart` å’Œ `onTouchEnd` ï¼ˆç§»åŠ¨ç«¯ï¼‰äº‹ä»¶èƒ½æ­£å¸¸è§¦å‘ï¼Œè½¬å‘ `ref` åˆ° `HTMLElement` ä¸Šä¿è¯æ‰“å¼€/å…³é—­åŠ¨ç”»æºçš„æ­£ç¡®æ€§ã€‚

```jsx
<PhotoProvider>
  <PhotoView src={imageURL}>
    <Button primary>ç‚¹å‡»é¢„è§ˆ</Button>
  </PhotoView>
</PhotoProvider>
```

<DocButton />

## `PhotoSlider`

ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ `<PhotoProvider />` é…åˆ `<PhotoView />` å·²ç»æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚å¦‚æœæœ‰æ›´é«˜çº§çš„è‡ªå®šä¹‰æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ `<PhotoSlider />`ã€‚

`<PhotoSlider />` çš„å‚æ•°ç»§æ‰¿è‡ª `<PhotoProvider />`ã€‚ä¼šé¢å¤–æš´éœ²å‡ ä¸ª APIï¼š

- `images` å›¾ç‰‡åˆ—è¡¨ï¼Œ`DataType[]`
- `visible` æ˜¯å¦å¯è§å—æ§å±æ€§ `boolean`
- `onClose` å…³é—­äº‹ä»¶å›è°ƒ `() => void`
- `index` å½“å‰ç´¢å¼•å—æ§å±æ€§ `number`
- `onIndexChange` ç´¢å¼•æ”¹å˜å›è°ƒ `(index: number) => void`

`visible` å’Œ `onClose` æ­é…å½¢æˆå—æ§ï¼Œ`index` æ­é… `onIndexChange` å½¢æˆå—æ§ã€‚

```jsx
export default function MyComponent() {
  const [visible, setVisible] = useState(false);
  const [photoIndex, setPhotoIndex] = useState(0);

  return (
    <>
      <Button onClick={() => setPhotoIndex(2)}>setPhotoIndex(2)</Button>
      <Button onClick={() => setPhotoIndex(4)}>setPhotoIndex(4)</Button>
      <Button onClick={() => setVisible(true)} primary>
        Open
      </Button>

      <PhotoSlider
        images={images.map((item) => ({ src: item, key: item }))}
        visible={visible}
        onClose={() => setVisible(false)}
        index={photoIndex}
        onIndexChange={setPhotoIndex}
      />
    </>
  );
}
```

<DocControlled />

## é¢„è§ˆæ›´å¤š

`<PhotoView />` æ— å­ç»„ä»¶çš„æƒ…å†µä¸‹ä¹Ÿèƒ½åŠ å…¥åˆ°é¢„è§ˆé˜Ÿåˆ—ï¼Œåªæ˜¯æ— æ³•ç›´æ¥è§¦å‘å½“å‰å›¾ç‰‡çš„é¢„è§ˆã€‚é€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç»è¿‡ä¸€ä¸ªå…¥å£ï¼Œé¢„è§ˆæ›´å¤šå›¾ç‰‡çš„åŠŸèƒ½ï¼š

```jsx
<PhotoProvider>
  {images.map((item, index) => (
    <PhotoView key={index} src={item}>
      {index < 2 ? <img src={item} alt="" /> : undefined}
    </PhotoView>
  ))}
</PhotoProvider>
```

<DocPart />

## è‡ªå®šä¹‰æ¸²æŸ“èŠ‚ç‚¹

`<PhotoView />` é»˜è®¤å†…ç½®æ”¯æŒå›¾ç‰‡çš„é¢„è§ˆï¼Œåªéœ€ä¼ é€’ `src` å³å¯ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨è¯†åˆ«å›¾ç‰‡çš„å®½é«˜ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ `render` å‡½æ•°å®ç°è‡ªå®šä¹‰èŠ‚ç‚¹çš„é¢„è§ˆï¼Œä»¥æ”¯æŒ `video` æˆ– `pdf` çš„éœ€æ±‚ã€‚

```jsx
const elementSize = 400;

<PhotoView
  width={elementSize}
  height={elementSize}
  render={({ scale, attrs }) => {
    const width = attrs.style.width;
    const offset = (width - elementSize) / elementSize;
    const childScale = scale === 1 ? scale + offset : 1 + offset;

    return (
      <div {...attrs}>
        <div style={{ transform: `scale(${childScale})` }}>
          <div>Hello world</div>
          <Button>button</Button>
          <input onMouseDown={(e) => e.stopPropagation()} />
        </div>
      </div>
    );
  }}
>
  <Button primary>Click</Button>
</PhotoView>;
```

<Callout emoji="ğŸ’¡">
  æ³¨æ„ï¼šç”»å»Šåœ¨ç¼©æ”¾ä¹‹åï¼Œå…ˆä¼šç”¨ `scale` è¿›è¡Œç¼©æ”¾ï¼Œåœ¨åŠ¨ç”»ç»“æŸååˆ™è°ƒæ•´ä¸ºå½“å‰ `scale` æ‰€å¯¹åº”çš„å®½é«˜ï¼Œå¹¶é‡ç½® `scale` ä¸º `1`ã€‚
</Callout>

<DocRender />

## PhotoProvider å‚æ•°

### è‡ªå®šä¹‰æè¿°

åœ¨ `<PhotoProvider />` ä¸Šæ·»åŠ  `overlayRender` å‡½æ•°ï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œå‡½æ•°å‚æ•°è¿”å›å€¼ä¸ `toolbarRender` ä¸€è‡´ã€‚

<DocOverlay />

### å¾ªç¯é¢„è§ˆ

åœ¨ `<PhotoProvider />` ä¸Šæ·»åŠ å‚æ•° `loop` å¯ä»¥æ›´æ”¹å¾ªç¯é¢„è§ˆæ•°é‡ã€‚è®¾ä¸º `boolean` å¯ç”¨/å…³é—­ï¼Œè®¾ä¸º `number` ç±»å‹åˆ™è¾¾åˆ°å…·ä½“æ•°é‡ä»¥å¼€å¯å¾ªç¯é¢„è§ˆï¼Œé»˜è®¤å€¼ä¸º `3` å¼ ï¼š

```jsx
<PhotoProvider loop={4}>
  {images.map((item, index) => (
    <PhotoView key={index} src={item}>
      <img src={item} alt="" />
    </PhotoView>
  ))}
</PhotoProvider>
```

<DocLoop />

### è’™å±‚é€æ˜åº¦

é¢„è®¾ä¸ºä¸é€æ˜ï¼Œä¸Šæ‹‰è¿‡ç¨‹ä¸­ä¼šæ…¢æ…¢å‡å°‘é€æ˜åº¦ï¼Œå¯åœ¨ `<PhotoProvider />` æ·»åŠ  `maskOpacity` è°ƒæ•´é»˜è®¤é€æ˜åº¦ï¼Œå¯è®¾ç½®ä¸º `0-1` ä¹‹é—´çš„æ•°å­—ï¼š

```jsx
<PhotoProvider maskOpacity={0.5}>
  <PhotoView src={imageURL}>
    <img src={imageURL} alt="" />
  </PhotoView>
</PhotoProvider>
```

<DocBackdrop />

### ä¸æ˜¾ç¤ºé¡¶éƒ¨æŒ‰é’®åŒºåŸŸ

è®¾ç½® `bannerVisible` ä¸º `false` åˆ™å¯ä»¥ä¸æ˜¾ç¤ºé¡¶éƒ¨åŒºåŸŸï¼š

<DocPure />

### è’™å±‚äº‹ä»¶

`pullClosable` æ˜¯å¦å¯ä»¥é€šè¿‡ä¸‹æ‹‰å…³é—­ç”»å»Šï¼Œé»˜è®¤ `true`ï¼Œ`maskClosable` æ˜¯å¦å¯ä»¥ç‚¹å‡»è’™ç‰ˆå…³é—­ç”»å»Šï¼Œé»˜è®¤ `true`ã€‚

<DocClose />

## è‡ªå®šä¹‰åé¦ˆ

`<PhotoView />` å¦‚æœåŠ è½½å¤±è´¥ï¼Œé»˜è®¤æ¸²æŸ“ç©ºèŠ‚ç‚¹ï¼Œä½ å¾ˆå¯èƒ½éœ€è¦æ ¹æ®å½“å‰ UI è®¾ç½®å±äºè‡ªå·±çš„é”™è¯¯åé¦ˆèŠ‚ç‚¹ã€‚

- `brokenElement` - è®¾ç½®åŠ è½½å¤±è´¥å›¾æ¡ˆ `React.ReactElement`
- `loadingElement` - è®¾ç½®åŠ è½½ä¸­å›¾æ¡ˆ `React.ReactElement`

<DocBroken />
